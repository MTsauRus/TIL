## 251003

### 리플렉션

- java.lang.Class 객체에 있음
- Class 객체로부터 Method, Field, Constructor과 같은 클래스 구성 요소를 담은 객체를 얻을 수 있음.
  - Class.forName("클래스명")
  - getDeclaredMethods(), getDeclaredFields()
    - 클래스에 직접 선언된 모든 메서드와 필드 정보를 접근 제어자와 무관하게 가져옴
    - private로 선언되어도 가져올 수 있음.
    - 캡슐화 무시에 대한 위험성 존재
  - getMethods, getConstructor()
  - Method.invoke(객체 인스턴스, 인자)
    - 리플렉션의 핵심
    - 특정 객체 메서드를 동적으로 호출
  - Constructor.newInstance(인자)
    - 생성자를 통해 새로운 객체 인스턴스를 생성할 수 있음
- Class.forName()으로 빈 클래스 로드, getConstructor()로 생성자 찾기, invoke()로 빈 초기화 메서드 호출.

### Spring IoC 컨테이너에서의 리플렉션 역할

1. 빈 후보 스캔
   - 클래스패스를 스캔하여 @Component, @Service, @Repository 등의 어노테이션이 붙은 클래스를 찾음
2. 의존성 분석
   - 식변된 클래스들의 필드, 생성자, 메서드를 리플렉션을 통해 분석.
   - @Autowired와 같은 어노테이션을 찾음
   - 이를 통해 필요한 의존성 파악
3. 빈 생성 및 의존성 주입
   - 리플렉션을 사용하여 해당 빈의 인스턴스를 생성
     - Constructor.newInstance()
   - 필요한 의존 객체(다른 빈)을 찾아 생성된 인스턴스에 주입
     - 생성자의 인자로 전달
     - 또는 Field.set()을 통해 필드에 직접 할당
