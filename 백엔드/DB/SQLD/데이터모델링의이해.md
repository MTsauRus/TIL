## 데이터 모델링의 이해

- 데이터 모델링 특징
  - 추상화
  - 단순화
  - 명확성
- 데이터 모델링 단계
  - 개념->논리->물리
  - 개념적
    - 고객의 BM 분석. 기술적 용어 사용 x. 개념적 erd
  - 논리적
    - 식별자 도출, 필요한 릴레이션 정의.
    - 정규화
  - 물리적
    - 실제 구축
    - 테이블, 인덱스, 함수 생성
    - 성능, 보안, 가용성 고려
- 데이터 모델링 관점
  - 데이터: 구조 분석, 정적 분석
  - 프로세스: 시나리오 분석, 도메인 분석, 동적 분석
  - 데이터와 프로세스: CRUD
- ERD 작성 절차

  - 엔티티 도출, 그리기
  - 엔티티 배치
  - 관계 설정
  - 관계명 서술
  - 관계 참여도 설정
  - 필수 여부 표현

- 3층 스키마
  - 외부 단계: 외부 스키마
    - DB의 뷰를 표시
    - 응용 프로그램이 접근하는 DB
  - 개념 단계: 개념 스키마
    - 설계자 관점
    - 통합 DB 구조
  - 내부 단계: 내부 스키마
    - 개발자 관검
    - 물리적 저장 구조
    - 데이터 저장 구조, 레코드 구조, 필드 정의, 인덱스 등

## 엔티티

- 업무에서 관리하는 데이터 집합
- 개념, 사건, 장소 등의 명사

- 유형과 무형에 따른 분류

  - 유형 엔티티
    - 업무에서 도출
    - 지속적으로 사용
  - 개념 엔티티
    - 물리적 형태가 없음
    - 개념적으로 사용
    - 거래소 종목, 생명보험 상품
  - 사건 엔티티
    - 비즈니스 프로세스를 진행하면서 생성
    - 주문, 체결

- 발생 시점에 따른 분류
  - 기본 엔티티
    - 키 엔티티라고도 함
    - 독립적으로 생성
    - 고객, 상품, 부서
  - 중심 엔티티
    - 기본 엔티티와 행위 엔티티의 중간에 있음
    - 기본 엔티티로부터 발생, 행위 엔티티를 생성함
    - 계좌, 주문, 체결, 취소
  - 행위 엔티티
    - 2개 이상의 엔티티에 의해 발생
    - 주문 이력, 체결 이력

## 속성

- 엔티티가 가지는 항목
- 더이상 분리되지 않는 단위
- 인스턴스의 구성요소
- 일반적으로 하나의 값만 가짐
- 주식별자에 함수적으로 종속

- 분해 여부에 따른 속성의 종류

  - 단일 속성
    - id, 이름
  - 복합 속성
    - 주소
  - 다중값 속성
    - 상품 리스트
    - 엔티티로 분해됨

- 특성에 따른 속성의 종류
  - 기본 속성
    - BM에서 도출되는 본래의 속성
  - 설계 속성
    - 설계 과정에서 발생되는 속성
    - 유일한 값 부여
    - 상품코드, 지점코드
  - 파생 속성
    - 다른 속성에 의해 만들어짐
    - 합계, 평균

## 관계

- 엔티티 간의 관련성을 의미
- 존재 관계와 행위 관계로 나뉨
- 존재 관계는 엔티티 간의 상태를 의미.
  - 고객은 관리점에 '소속'된다.
- 행위 관계는 엔티티 간 어떤 행위가 있는 것.
  - 계좌는 일자별주문이력을 '발주'한다.

## 관계 차수

- 관계 차수
  - 두 개의 엔티티 참여도 여부
  - 일대일, 일대다, 다대다
  - 일대일은 완전 일대일, 선택적 일대일이 존재.

## 엔티티 식별자

- 주식별자

  - 최소성
  - 대표성
  - 유일성
  - 불변성
  - 존재성
  - not null

- 후보키
  - 최소성 + 유일성
- 슈퍼키
  - 유일성만. 최소성 x
- 대체키
  - 후보키 중에서 기본키가 아닌 키
- 외래키
  - 참조 무결성을 확인하기 위함

## 식별자의 종류

- 식별자의 대표성
  - 주식별자
    - 엔티티를 대표
    - 다른 엔티티와 참조 관계로 연결됨(FK)
  - 보조 식별자
    - 유일성, 최소성은 만족하지만 대표성을 만족하지 못함
- 생성 여부
  - 내부 식별자
    - 엔티티 내부에서 스스로 생성
    - 부서코드, 주문번호, 종목코드
  - 외부 식별자
    - 다른 엔티티와의 관계에 의해 생성
      - 계좌 엔티티 안에 회원ID(FK)
- 속성의 수
  - 단일 식별자
  - 복합 식별자
- 대체 여부
  - 본질 식별자
  - 인조 식별자
    - 순서번호(sequence)에 의해 만들어짐

## 좋은 모델링의 요건

- 중복 배제
- Business rule
- 완전성

## 선택도

- 값의 범위 / 전체값

## 카디널리티

- 하나의 컬럼에서 distinct한 값
- 쿼리를 조회했을 때 중복 값이 적을수록 카디널리티가 높다.

## 데이터 모델링의 고려사항

- 데이터 중복
- 비유연성
- 비일관성

## 속성

- 사물의 성질
- 사물의 본질적 성질
- 사물의 특징

## 데이터 모델링의 세 가지 중요 개념

- 어떤 것 (things)
- 어떤 것의 성격 (attribute)
- 어떤 것의 관계 (relationships)

## 관계를 정의할 때 체크해야 하는 사항

- 두 개의 엔티티 사이에 관심 있는 연관규칙이 있는가?
- 업무기술서, 장표에 '동사'가 있는가?
- 업무기술서, 장표에 관계연결 규칙이 서술되어 있는가?
- 두 개의 엔티티 사이에 정보의 조합이 발생하는가?

## 데이터 모델링의 3요소

- things
- attributes
- relationships

## 데이터 모델링의 세 가지 관점

- 데이터 관점
  - 업무가 어떤 데이터와 관련 있는지
  - 데이터 간의 관계는 무엇인지
  - what, data
- 프로세스 관점
  - 업무가 실제로 하고 있는 일은 무엇인지
  - 무엇을 해야 하는지
  - how, process
- 데이터와 프로세스의 상관관점
  - 업무가 처리하는 일의 방법에 따라 데이터는 어떻게 영향을 받는지
  - intersection

## 해시 조인의 특징

- 조인 칼럼의 인덱스가 없어도 사용 가능
- 동등조인에서만 사용 가능
- 해시 함수가 적용될 때 항상 같은 값으로 해시됨을 보장
- 해시 테이블을 메모리에 생성해야 함
- 해시 테이블을 저장할 때 메모리 용량보다 크면 임시 영역(디스크)에 저장함
- 결과 행의 수가 적은 테이블을 선행 테이블로 두자
- 선행 테이블은 build input, 후행 테이블은 prove input이라 한다.

## 분산 데이터베이스의 투명성

- 분할 투명성
- 위치 투명성
  - 사용하려는 데이터의 저장 장소 명시가 불필요
  - 위치 정보가 system catalog에 유지되어야 함
- 중복 투명성
- 병행 투명성
- 장애 투명성
- 지역 사상 투명성
  - 지역 DBMS와 물리적 DB 사이의 mapping을 보장함
  - 각 지역 시스템 이름과 무관한 이름 사용이 가능
