## 2024.07

### DDL, DML, DCL

- DDL: data definition lang
  - create, alter, drop
- DML: data manipulation lang
  - select, insert, delete, update
- DCL: data control lang
  - commit, rollback, grant, revoke

### ACID

- atomic
- consistency
  - 일관성, 트랜잭션 성공 시 언제나 일관성 있는 디비 상태로 변환
- isolation
- durability
  - 영속성: 시스템이 고장나더라도 결과는 잃어버리지 않음

### RESTRICT 조건

- 삭제할 대상을 다른 곳에서 참조하고 있으면 삭제를 취소하는 옵션
- 연관된 뷰까지 함께 삭제하려면 cascade를 사용

### 키의 종류

- 슈퍼키
  - 한 릴레이션 내에 있는 속성들의 집합으로 구성된 키
  - 유일성은 만족, 최소성은 만족 x
- 후보키
  - 유일성, 최소성 모두 만족
- 기본키
  - 후보키 중 not null, 중복불가
- 대체키
  - 후보키 중 기본키가 아닌 것
- 외래키
  - 참조 무결성

### 관계대수, 관계해석

- 관계대수
  - 원하는 정보와 그 정보를 어떻게 유도하는가를 기술하는 절차적 특성
  - 릴레이션을 처리하기 위한 연산의 집합
  - 피연산자, 결과가 모두 릴레이션임
  - select, project, 카테시안곱, 조인, 디비전 등..
- 관계해석

  - RDBMS에서 무슨 데이터를 가져올 것인지를 명시적으로 기술
  - 결과를 얻기 위한 조건을 선언적으로 표현
  - 수학의 프레디킷 해석에 기반을 둠
  - 튜플 관계해석: {t | P(t)} {t | t ∈ Student ∧ t.학과 = '컴퓨터공학'}
  - 도메인 관계해석: {<학번, 이름> | ∃학과 (학과 = '컴퓨터공학')}

- 관계대수는 절차적 언어, 수학적 연산자, 어떻게(HOW), 데이터 처리 방법에 중점
- 관계해석은 비절차적 언어, 논리적 조건, 무엇(WHAT), 데이터 검색 조건에 중점

### 분산 디비의 투명성 (transparency)

- 위치 투명성(Location Transparenecy)
  - 접근하는 디비의 실제 위치를 몰라도 됨
  - 디비의 논리적 명칭으로만 접근 가능
- 중복 투명성(Replication Transparenecy)
  - 동일한 데이터가 여러 곳에 중복되어 있어도 하나만 있는 것 처럼 사용할 수 있다.
  - 시스템은 자동으로 여러 데이터에 대한 작업을 수행한다.
- 병행 투명성(Concurrency Transparenecy)
  - 분산 디비와 관련된 다수의 트랜잭션이 동시에 수행되도 그 트랜잭션의 실행 결과는 서로 영향받지 않음
- 장애 투명성(Failure Transparenecy)
  - 트랜잭션, DBMS, 네트워크, 컴 장애가 발생해도 트랜잭션은 잘 수행됨.

### 분산 디비

- 구성요소
  - 분산 처리기
    - 자체적으로 처리 능력을 가짐
    - 지리적으로 분산되어 있는 컴퓨터 시스템을 의미
  - 분산 디비
    - 해당 지역의 특성에 맞게 디비가 구성됨
  - 통신 네트워크
    - 분산 처리기들을 통신망으로 연결
    - 논리적으로 하나의 시스템처럼 작동할 수 있도록 하는 통신 네트워크를 의미
- 장점
  - 지역 자치성
  - 자료 공유성
  - 분산제어
  - 성능굿
  - 중앙 장애가 알빠노
- 단점
  - DBMS복잡
  - 디비설어렵
  - SW개발비증가
  - 처리비용증가
  - 잠재오류발생가능성

### 시스템 카탈로그

- 시스템 그 자체에 관련이 있는 다양한 객체에 대한 정보를 포함하는 시스템 디비
- 시스템 카탈로그 내의 테이블은 사용자를 포함하여 DBMS에서 지원하는 모든 데이터 객체에 대한 정의, 명세 정보를 유지 관리하는 시스템 테이블이다.
- 카탈로그들이 생성되면 데이터 사전에 저장된다.
  - 좁은 의미로 데이터 사전이라고도 한다.
- 시스템 카탈로그에 저장된 정보를 메타 데이터라고 한다.
- 카탈로그 자체도 시스템 테이블로 구성되어 있어 일반 이용자도 SQL을 이용하여 검색할 수 있다.
- insert, delete, update로 카탈로그 갱신 불가
- 디비 시스템에 따라 상이한 구조
- DBMS가 스스로 생성 및 유지

### 정규화

- 제1정규형
  - 원자값을 가져야 함
- 제2정규형
  - 부분 함수적 종속성 제거
  - 기본키의 일부분에 종속된 속성 제거
- 제3정규형
  - 이행적 함수적 종속성 제거
  - 비기본 속성이 다른 비기본 속성을 종속하지 않도록
- BCNF
  - 모든 결정자가 후보키가 되도록
  - 모든 함수적 종속에서 결정자가 후보키

### 로킹 단위 (Locking Granularity)

- 주요 잠금 단위
  - 테이블 수준 잠금
    - 구현이 간단, 오버헤드가 적음
    - 동시성이 낮음. 여러 사용자가 같은 테이블을 동시에 수정 불가
  - 페이지 수준 잠금
    - 데이터 페이지를 잠금
      - 테이블 잠금보다 동시성(병행성)이 높음
      - 동일 페이지 내에서 충돌 가능성 존재
    - 행 수준 잠금
      - 특정 행만 잠금
      - 동시성(병행성)이 매우 높음
      - 잠금 관리 오버헤드가 큼
    - 필드 수준 잠금
      - 잠금 범위를 최소화하여 최대 동시성(병행성) 보장
      - 관리가 매우 복잡
- 잠금 단위의 트레이드오프
  - 로킹 단위가 클수록
    - 관리가 쉬워지고 오버헤드가 감소
    - 병행성이 낮아지고 교착 상태가 줄어듦
  - 로킹 단위가 작을수록
    - 병행성이 높아지고 작업 충돌 가능성이 줄어듦
    - 로킹 관리 오버헤드가 커지고 복잡해짐

### Degree, Cardinality

- Degree: 속성(attr)의 수
- Cardinality: 튜플(row)의 수

DDL: data definition
create, drop
dml: data manipulation
select, insert, update
dcl: data control
grant,

### 즉각 갱신 기법

- 트랜잭션이 데이터를 갱신하면 트랜잭션이 부분 완료되기 전이라도 즉시 디비에 반영하는 기법
- 장애가 발생하는 경우를 대비하여 로그에 보관
- 회복 작업 시 Redo, Undo 모두 사용 가능
-
